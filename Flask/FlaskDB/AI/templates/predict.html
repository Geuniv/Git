{% extends 'base.html' %}
{% block content %}

<style>
    * {

  margin: 0;
  padding: 0;
}


/* input file type */
.input-file {
  display: inline-block;
}

.input-file [type="file"] {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0 none;
}
.input-file .file-label {
  display: inline-block;
  min-width: 53px;
  height: 27px;
  line-height: 24px;
  padding: 0 10px;
  border-radius: 2px;
  font-size: 13px;
  background-color: #333;
  color: #fff;
  text-align: center;
}
.input-file .file-name {
  width: 300px;
  background: #f5f5f5;
  height: 27px;
  line-height: 26px;
  text-indent: 5px;
  border: 1px solid #bbb;
}

/* 접근성 탭 포커스 스타일 */
.file-focus {
  outline: 1px dotted #d2310e;
}

.centered { display: table; margin-left: auto; margin-right: auto; }
</style>

    <div class="container-sm">100% wide until small breakpoint
        <h2 class="centered">파일 업로드 후 예측결과 버튼을 클릭해주세요</h2>
        <div class="w3layouts">

            <div class="centered">
                <img src="{{ url_for('static', filename='KakaoTalk_20221221_104740512.jpg') }}" width='700' height='700' >
            </div>


            <div class="photos-upload-view centered">

                <form id="upload" action="/predict/predict" method="POST" enctype="multipart/form-data">
                    <div class="input-file">
                      <input type="text" readonly="readonly" class="file-name" />
                      <label for="filename" class="file-label">이미지 업로드</label>
                      <input id="filename" type="file" value="Upload" name="image" class="file-upload" />
                    </div>
                    <br />
                    <input id="submitButton" type="submit" value="예측 결과" class="btn btn-dark centered">
                    {% if class_name %}
                        <span class="result_lable">
                            {{ class_name }}
                        </span>
                        <p class="alert">
                            {{ alert }}
                        </p>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="/static/js/scripts.js"></script>
<script>
(function($){

  var $fileBox = null;

  $(function() {
    init();
  })

  function init() {
    $fileBox = $('.input-file');
    fileLoad();
  }

  function fileLoad() {
    $.each($fileBox, function(idx){
      var $this = $fileBox.eq(idx),
          $btnUpload = $this.find('[type="file"]'),
          $label = $this.find('.file-label');

      $btnUpload.on('change', function() {
        var $target = $(this),
            fileName = $target.val(),
            $fileText = $target.siblings('.file-name');
        $fileText.val(fileName);
      })

      $btnUpload.on('focusin focusout', function(e) {
        e.type == 'focusin' ?
          $label.addClass('file-focus') : $label.removeClass('file-focus');
      })

    })
  }

})(jQuery);
</script>
{% endblock %}